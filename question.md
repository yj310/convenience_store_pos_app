## 편의점 POS 앱

# 문제 설명
우리 회사는 Flutter로 편의점 POS(Point-of-Sale) 앱을 개발 중입니다. 이 앱은 바코드 스캔을 통해 상품을 장바구니에 추가하고, 다양한 프로모션 로직에 따라 결제 총액을 계산합니다.


시나리오:
편의점 점주 김씨의 하루
김씨는 서울 강남구에 위치한 24시간 편의점을 운영하고 있습니다. 오늘은 주말이라 손님이 많을 예정입니다.

오전 8시: 출근한 김씨는 POS 시스템을 켜고 오늘의 프로모션을 확인합니다.
- 음료수 1+1 행사 (콜라, 사이다, 커피 등)
- 과자 2+1 행사 (초코바, 감자칩, 쿠키 등)
- 생수 구매 시 컵라면 증정
- 에너지드링크 특가 행사

오후 2시: 점심시간이 지나고 학생들이 방문합니다.
학생 A: 콜라 2개, 사이다 1개 구매 → 1+1 프로모션으로 사이다 무료
학생 B: 초코바 3개 구매 → 2+1 프로모션으로 1개 무료
학생 C: 생수 1개, 컵라면 1개 구매 → 생수 구매 시 컵라면 증정

저녁 8시: 직장인들이 퇴근하며 방문합니다.
직장인 A: 에너지드링크 2개 구매 → 고정가격 2,000원 적용
직장인 B: 커피 2개, 우유 1개 구매 → 커피 1+1 프로모션 적용

본 과제에서는 이러한 다양한 프로모션이 적용되는 추상화된 프로모션 파이프라인을 설계하고 전체 시스템을 구현해야 합니다.


# 입력 조건
- 바코드 스캔 또는 수기 입력으로 상품을 장바구니에 추가
- 이미 장바구니에 있는 상품이면 수량 증가
- 수량 조정 및 삭제 가능
- 상품 데이터는 Mock API로 제공됨
- 프로모션은 다음과 같은 형태가 존재:
  - 1+1 (교차 증정 포함)
  - 2+1 (교차 증정 포함)
  - 상품 무료 증정
  - 고정 가격


상품 분류 및 프로모션 정책
상품 | 카테고리 | 상품명 | 가격 | 프로모션 | 유형 | 그룹 | 비고
음료수 | 코카콜라 500ml | 1,800원 | 1+1 | beverage | 교차증정 가능
음료수 | 스프라이트 500ml | 1,800원 1+1 beverage | 교차증정 가능
음료수 | 펩시콜라 500ml | 1,800원 | 1+1 | beverage | 교차증정 가능
커피 | 맥스웰하우스 | 커피 275ml | 1,200원 | 1+1 | coffee | 교차증정 가능
커피 | 조지아 커피 275ml | 1,200원 | 1+1 | coffee | 교차증정 가능
과자/스낵 | 스누피 초코바 | 1,500원 | 2+1 | snack | 교차증정 가능
과자/스낵 | 포카칩 오리지널 | 1,500원 | 2+1 | snack | 교차증정 가능
과자/스낵 | 오리지널 쿠키 | 1,500원 | 2+1 | snack | 교차증정 가능
생수 | 삼다수 2L | 1,200원 | 무료 증정 | water | 컵라면 증정
컵라면 | 농심 신라면 컵 | 1,100원 | 없음 | instant | 증정 대상
컵라면 | 오뚜기 진라면컵 | 1,100원 | 없음 | instant | 증정 대상
에너지드링크 | 레드불 250ml | 2,800원 | 고정 가격 | energy | 2,000원 특가
에너지드링크 | 몬스터에너지 355ml | 3,200원 | 고정 가격 | energy | 2,200원 특가
유제품 | 서울우유 1L | 2,500원 | 없음 | dairy | 일반 상품
유제품 | 요플레 딸기 150ml | 1,200원 | 없음 | dairy | 일반 상품
유제품 | 바나나우유 200ml | 1,400원 | 없음 | dairy | 일반 상품
빵류 | 빵빠레 4개입 | 2,800원 | 없음 | bread | 일반 상품
도시락 | 삼각김밥 참치마요 | 3,500원 | 없음 | meal | 일반 상품
도시락 | 도시락 제육볶음 | 4,500원 | 없음 | meal | 일반 상품
아이스크림 | 아이스크림 바닐라 | 1,500원 | 없음 | icecream | 일반 상품

# 요구사항
1. 상품 목록 기능
- 상품을 카메라 바코드 스캔 또는 수기 입력으로 추가
- 장바구니 내 존재 시 수량 증가
- 수량 조절 UI 및 삭제 기능
- 기본적인 상태관리를 통해 구현

2. 프로모션 로직 처리
- 프로모션 조건 충족 시 자동 적용
- 동일 그룹 내 교차 증정 적용 가능
- 증정 상품은 증정됨 으로 표시
- 미증정 상태도 UI로 명확히 표시
- 각 상품은 하나의 프로모션만 적용됨
프로모션 타입 | 조건 | 처리 방식
1+1 | 같은 그룹 상품 2개 | 2번째 상품 가격 제외
2+1 | 같은 그룹 상품 3개 | 3번째 상품 가격 제외
무료 증정 | 특정 상품 구매 시 특정 상품 1개 무료 | 증정 상품 가격 제외
고정 가격 | 프로모션 조건 만족 시 고정 가격 적용 | 가격 강제 설정

3.프로모션 파이프라인 설계
- 추상화된 Promotion Pipeline 객체 설계
- 모든 장바구니 항목은 해당 파이프라인을 통과해 최종 가격이 계산됨
- 프로모션을 동적으로 파이프라인에 삽입 및 제거 가능해야 함
- 다양한 타입의 프로모션 응답( type )을 적절히 파싱하여 모델화할 것
    - JsonConverter 또는 custom parser 사용 가능
    - sealed class Promotion 구조 권장
4. UI 구성
> 필수 UI 기능
- 상품 입력 (스캔/입력)
- 장바구니 목록 표시
    - 상품명, 수량, 개별 가격, 총 가격
    - 증정 여부/미증정 여부 표시
- 프로모션 적용 상태 표시
- 결제 총액 표시

> 선택적 UI 기능
- 증정 상품 강조 표시
- 적용된 프로모션 정보 툴팁
- 프로모션 로그 트레이스


# 구현 가이드
- 상태관리는 Bloc 또는 기타 선택 자유
- promotion.type 에 따라 sealed class로 모델 구분 권장
- 장바구니는 단순 List로 구현 가능하나 가격 계산은 PromotionPipeline을 통과하도록 설계


# 제약조건
- Flutter Android/iOS 지원
- AI 사용 가능
- 외부 라이브러리 사용 가능

# 제출 방법
Flutter 프로젝트 소스 코드
- build 폴더 삭제 후 zip으로 압축하여 이메일 첨부
- README.md 파일 작성
    - 실행 방법
    - 주요 기능 설명
    - 프로모션 파이프라인 설계 및 클래스 구조 설명
    - Mock Data 형식 및 사용법



# ----------------추가내용----------------
- 프로모션
    - 1+1 상품인 경우 2개 사면 1개 무료, 4개 사면 2개 무료, ..., 99개 사면 49개 무료, 100개 사면 50개 무료 => 1개당 1개가 무료로 적용되어야함
        - 1개 구매: 1개 가격
        - 2개 구매: 1개 가격
        - 3개 구매: 2개 가격
        - 4개 구매: 2개 가격
        - 5개 구매: 3개 가격
        - 6개 구매: 6개 가격
        ...
        - 99개 구매: 50개 가격
        - 100개 구매: 50개 가격
    - 2+1 상품인 경우 3개 사면 1개 무료, 6개 사면 2개 무료, ..., 99개 사면 33개 무료, 100개 사면 33개 무료 => 2개당 2개가 무료로 적용되어야함. 
        - 1개 구매: 1개 가격
        - 2개 구매: 2개 가격
        - 3개 구매: 2개 가격
        - 4개 구매: 3개 가격
        - 5개 구매: 4개 가격
        - 6개 구매: 4개 가격
        - 7개 구매: 5개 가격
        - 8개 구매: 6개 가격
        - 9개 구매: 6개 가격
        - 10개 구매: 7개 가격
        - 11개 구매: 8개 가격
        - 12개 구매: 8개 가격
        - 13개 구매: 9개 가격
        ...
        - 97 구매: 65개 가격
        - 98 구매: 66개 가격
        - 99개 구매: 66개 가격
        - 100개 구매: 67개 가격